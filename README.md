# Chia-report
Набор скриптов для сканирования фермы chia, поиска ошибок конфигурации, построения отчетов

### Основные функции

* Сканирование серверов, перечисленных в hosts.txt. Подключение происходит по ssh, без установки дополнительного ПО на сервер
* Определение моделей жестких дисков
* Поиск разделов на дисках, их объем, использование
* Поиск плотов
* Проверка конфигурации фармеров (hpool, flexpool)

### Поиск ошибок:

* Диск не содержит разделов
* Раздел не примонтирован или точка монтирования не соответствует указанной в fstab
* Дублирующиеся записи fstab
* Диск перемещен в другой сервер
* Конфиг фармера содержит некорректные пути или плоты используются несколькими фармерами

## Установка

```
git clone https://github.com/redeyed-dp/chia-report
cd chia-report
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

## Настройка

**Создайте файл hosts.txt со списком серверов фермы такого формата:**

```
#IP address and hostname divided by one space
192.168.1.1 host1
192.168.1.2 host2
```

**Сгенерируйте пару ключей при помощи `ssh_keygen`, скопируйте содержимое файла `id_rsa.pub` в папку `/root/.ssh/authorized_keys` на каждом сервере**

**Активируйте виртуальное окружение**

`source venv/bin/activate`

**Запустите скрипт**

`python main.py`
